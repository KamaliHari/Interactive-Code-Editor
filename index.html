<!DOCTYPE html>
<head>
	<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/monokai.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/dracula.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/3024-day.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/hopscotch.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/abcdef.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/lesser-dark.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/material.min.css">
	<link rel="stylesheet" type="text/css" href="style.css"> 
  <link rel="stylesheet" href="codemirror/theme/*.css">
  <script src="codemirror/addon/hint/show-hint.js"></script>
  <script src="codemirror/addon/hint/css-hint.js"></script>
  <script src="codemirror/addon/hint/javascript-hint.js"></script>
  <link rel="stylesheet" href="codemirror/addon/hint/show-hint.css">
  
<script src="codemirror/addon/edit/closebrackets.js"></script>
<link rel="javascript" type="js" href="app.js">
	
</link>

</head>
	<body>
	<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.js">
</script>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/mode/javascript/javascript.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/xml/xml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/mode/css/css.min.js"></script>
<script src="https:///cdnjs.cloudflare.com/ajax/libs/codemirror/5.13.4/mode/htmlmixed/htmlmixed.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/addon/edit/closetag.min.js"></script>
<h1>Enga Ooru Code Editor</h1>
<h4>Themes</h4>
<select id="theme-select" >
  <option value="default">Default</option>
  <option value="monokai">Monokai</option>
  <option value="dracula">Dracula</option>
  <option value="3024-day">3024-day</option>
  <option value="abcdef">abcdef</option>
  <option value="hopscotch">hopscotch</option>
  <option value="lesser-dark">lesser-dark</option>
  <option value="material">material</option>
  
</select>
		<div class="codeeditor">
		<section >
		<h4 class="htmlText">HTML</h4>
		<div id="html-area"> </div>		
	</section>
	<section>
		<h4 class="cssText">	CSS</h4>
		<div id="css-area"> </div>
	</section>

	<section >
		<h4 class="jsText">	JS 	</h4>
	    <div id="script-area" > </div>	
	</section>
</div>
<div class="outputeditor">	
  <h4>Output</h4>
	<iframe id="output-frame" width="1200" height="550" ></iframe>
	</div>
	
 <script type="text/javascript">

var htmlValue=CodeMirror(document.getElementById('html-area',), {
  lineNumbers: true,
  value:document.getElementById("html-area").innerText ,
  tabSize: 2,
  mode: 'htmlmixed',
  autoCloseTags: true, 
  autoCloseBrackets: true,
  extraKeys: { "Ctrl-Space": "autocomplete" },
  theme: 'default'
});
CodeMirror.registerHelper("hint", "html", function(editor) {
            var keywords = ['html', 'head', 'body', 'title', 'div', 'span', 'a', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'img', 'ul', 'ol', 'li', 'table', 'tr', 'td', 'th']; // Example keywords
            var cur = editor.getCursor();
            var token = editor.getTokenAt(cur);
            var start = token.start;
            var end = cur.ch;
            var line = editor.getLine(cur.line);
            var context = line.substring(start, end);
            var list = [];
            for (var i = 0; i < keywords.length; i++) {
                if (keywords[i].indexOf(context) === 0) {
                    list.push(keywords[i]);
                }
            }
            return {
                list: list,
                from: CodeMirror.Pos(cur.line, token.start),
                to: CodeMirror.Pos(cur.line, token.end)
            };
        });
var cssValue=CodeMirror(document.querySelector('.codeeditor #css-area',), {
  lineNumbers: true,
  value:document.getElementById("css-area").innerText ,
  tabSize: 2,
  mode:'css',
  autoCloseTags: true, 
  autoCloseBrackets: true,
  extraKeys: { "Ctrl-Space": "autocomplete" },
   theme: 'default'
});
var jsValue=CodeMirror(document.querySelector('.codeeditor #script-area',), {
  lineNumbers: true,
  value:document.getElementById("script-area").innerText ,
  tabSize: 2,
   mode: 'javascript',
   autoCloseTags: true, 
   autoCloseBrackets: true,
   extraKeys: { "Ctrl-Space": "autocomplete" },
     theme: 'default'
});

var themeSelect = document.getElementById('theme-select');

themeSelect.addEventListener('change', function() {

    var selectedTheme = themeSelect.value;

    htmlValue.setOption('theme', selectedTheme);
    cssValue.setOption('theme', selectedTheme);
    jsValue.setOption('theme', selectedTheme);
});

		function run(){		
			var htmlCode=htmlValue.getValue();			
			let cssCode="<style>"+cssValue.getValue()+"</style>";
			let scriptCode=jsValue.getValue();
			let output =document.querySelector(".outputeditor #output-frame");
			output.contentDocument.body.innerHTML=htmlCode+cssCode;
			output.contentWindow.eval(scriptCode);
		}
    htmlValue.on("keyup", function() {
        run();
    });

    cssValue.on("keyup", function() {
        run();
    });

    jsValue.on("keyup", function() {
        run();
    });

    

    
  	
	</script>
	</body>
	</html>